`ssh-freeagent`
===============

Don't you hate it when you leave a command running in a screen, close your laptop, and go home only to find the next day that the command needed your SSH agent?  I do.

`ssh-freeagent` creates a new SSH key pair, authorizes the public key to login to one or more hosts, runs a local command that will be able to SSH to those hosts without hassling with SSH agents, and finally unauthorizes the public key and destroys the private key.

You are the right amount of paranoid if this makes you queasy but consider a few things:

1. An SSH agent introduces roughly the same risks as a temporary SSH key pair as generated by `ssh-freeagent`.  Both are protected by UNIX permissions.  Both introduce a window of opportunity for an attacker to use the private key for nefarious purposes.
2. The most often-cited alternative solution to this problem is to store long-lived SSH private keys on the hosts where `ssh-freeagent` generates temporary SSH key pairs.  Key management can be a pain.
3. `ssh-freeagent` is delegating existing authorizations, not introducing new ones.

[Diogo MÃ³nica](https://diogomonica.com) pointed out that `ssh-freeagent` breaks the common assumption that `~/.ssh/authorized_keys` is a static, rarely-changing file.  Without this assumption, he argues, the contents of those files aren't as easily auditable which gives an attacker the benefit of the systems administrator's uncertainty.

Installation
------------

Put `ssh-freeagent` on your `PATH`.

Usage
-----

```sh
ssh-freeagent example.com rcrowley.org sh orchestrate.sh
```

where `orchestrate.sh` might contain

```sh
ssh example.com something-slow
ssh rcrowley.org something-slow
```
